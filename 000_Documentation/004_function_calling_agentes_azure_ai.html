
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Function Calling en Agentes de Azure AI ‚Äî Resumen Interactivo</title>
<style>
:root{
  --bg:#0b0f14; --panel:#111826; --text:#e6edf3; --muted:#9fb0c0;
  --accent:#3b82f6; --accent2:#22d3ee; --border:#1f2937;
  --ok:#10b981; --warn:#f59e0b; --danger:#ef4444;
  --shadow:0 10px 30px rgba(0,0,0,.25);
}
[data-theme="light"]{
  --bg:#f7fafc; --panel:#ffffff; --text:#0b1220; --muted:#475569;
  --accent:#2563eb; --accent2:#0891b2; --border:#e5e7eb;
  --ok:#059669; --warn:#b45309; --danger:#b91c1c;
  --shadow:0 10px 30px rgba(0,0,0,.08);
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.container{display:grid;grid-template-columns:300px 1fr;min-height:100vh}
aside{position:sticky;top:0;height:100vh;padding:22px 16px;border-right:1px solid var(--border);background:linear-gradient(180deg,var(--panel),rgba(0,0,0,0))}
.logo{font-weight:800;font-size:1.25rem;margin-bottom:6px}
.subtitle{color:var(--muted);font-size:.95rem;margin-bottom:16px}
nav a{display:block;padding:9px 10px;margin:6px 0;border-radius:12px;text-decoration:none;color:var(--text);border:1px solid transparent}
nav a:hover{border-color:var(--border);background:rgba(59,130,246,.10)}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:.8rem;border:1px solid var(--border);color:var(--muted)}
.flex{display:flex;gap:8px;flex-wrap:wrap}
main{padding:36px 28px;max-width:1180px}
h1{margin:0 0 6px;font-size:2rem}
h2{margin-top:28px;font-size:1.35rem}
h3{margin-top:18px;font-size:1.05rem;color:var(--muted)}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:18px;margin:18px 0}
.grid-2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px}
.grid-3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
table{width:100%;border-collapse:collapse;margin:10px 0;font-size:.95rem}
th,td{padding:10px 12px;border-bottom:1px solid var(--border);vertical-align:top}
th{text-align:left;color:var(--muted)}
.kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#0b1220;color:#e6edf3;border:1px solid var(--border);padding:2px 6px;border-radius:6px}
.hint{background:linear-gradient(180deg,rgba(34,211,238,.10),rgba(34,211,238,.03));border:1px solid var(--border);border-radius:12px;padding:12px 14px;margin-top:10px}
.btns{position:fixed;right:16px;bottom:16px;display:flex;gap:10px}
.btn{background:var(--panel);color:var(--text);border:1px solid var(--border);border-radius:12px;padding:10px 12px;cursor:pointer;box-shadow:var(--shadow)}
.btn:hover{filter:brightness(1.05)}
.caption{color:var(--muted);font-size:.9rem;margin-top:6px}
svg{width:100%;height:auto;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,rgba(59,130,246,.08),rgba(59,130,246,.03))}
details{border:1px dashed var(--border);border-radius:12px;padding:10px 12px}
mark{background:rgba(59,130,246,.22);padding:1px 4px;border-radius:6px}
.footer{color:var(--muted);font-size:.9rem;margin-top:30px;border-top:1px dashed var(--border);padding-top:12px}
.code{background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:12px;overflow:auto;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:.9rem}
.small{font-size:.9rem;color:var(--muted)}
</style>
</head>
<body data-theme="dark">
<div class="container">
  <aside>
    <div class="logo">Function Calling</div>
    <div class="subtitle">Agentes Azure AI</div>
    <nav>
      <a href="#resumen">1. Resumen</a>
      <a href="#flujo">2. Diagrama de flujo</a>
      <a href="#ejemplos">3. Ejemplos de funciones</a>
      <a href="#definicion">4. Definir funciones (esquema)</a>
      <a href="#patron">5. Patr√≥n de implementaci√≥n</a>
      <a href="#buenas">6. Buenas pr√°cticas</a>
      <a href="#errores">7. Errores comunes</a>
      <a href="#check">8. Checklist</a>
    </nav>
    <div class="hint">
      <strong>Tip:</strong> Usa <em>Imprimir</em> para exportar a PDF y üåó para alternar tema.
    </div>
    <div class="flex" style="margin-top:10px">
      <span class="badge">APIs</span>
      <span class="badge">Python</span>
      <span class="badge">RAG</span>
      <span class="badge">Planificaci√≥n</span>
    </div>
  </aside>

  <main>
    <header>
      <h1>Function Calling en Agentes de Azure AI</h1>
      <p class="subtitle">C√≥mo los agentes invocan APIs y funciones Python personalizadas para pasar de ‚Äútexto‚Äù a ‚Äúacciones‚Äù.</p>
    </header>

    <section id="resumen" class="card">
      <h2>1) Resumen</h2>
      <p><strong>Function Calling</strong> permite a un agente invocar <em>funciones externas</em> (APIs, plugins, o <strong>funciones Python</strong>) seg√∫n la intenci√≥n del usuario. El modelo decide <em>cu√°ndo</em> y <em>cu√°l</em> llamar, procesa la salida y entrega una respuesta embellecida.</p>
    </section>

    <section id="flujo" class="card">
      <h2>2) Diagrama de flujo</h2>
      <figure>
        <svg viewBox="0 0 1080 380" role="img" aria-label="Flujo: Usuario ‚Üí Agente decide ‚Üí Ejecuta funci√≥n ‚Üí Respuesta">
          <defs>
            <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
              <polygon points="0 0, 6 3, 0 6" fill="currentColor"/>
            </marker>
          </defs>
          <rect x="40" y="40" width="1000" height="300" rx="16" ry="16" fill="rgba(17,24,39,.45)" stroke="var(--border)"/>
          <text x="56" y="62" fill="var(--muted)" style="font-size:13px">Ejecuci√≥n de Function Calling</text>

          <rect x="70" y="120" width="180" height="80" rx="12" ry="12" fill="rgba(59,130,246,.25)" stroke="var(--border)"/>
          <text x="120" y="165" fill="currentColor" style="font-weight:700">Usuario</text>

          <rect x="290" y="120" width="220" height="80" rx="12" ry="12" fill="rgba(59,130,246,.25)" stroke="var(--border)"/>
          <text x="320" y="150" fill="currentColor" style="font-weight:700">Agente (LLM+planner)</text>

          <rect x="540" y="85" width="220" height="70" rx="12" ry="12" fill="rgba(34,197,94,.25)" stroke="var(--border)"/>
          <text x="560" y="110" fill="currentColor" style="font-weight:700">Funciones Python</text>
          <text x="560" y="125" fill="currentColor" style="font-size:13px">c√°lculos, reglas</text>

          <rect x="540" y="195" width="220" height="70" rx="12" ry="12" fill="rgba(34,197,94,.25)" stroke="var(--border)"/>
          <text x="570" y="220" fill="currentColor" style="font-weight:700">APIs externas</text>
          <text x="570" y="235" fill="currentColor" style="font-size:13px">HTTP GET/POST</text>

          <rect x="790" y="120" width="220" height="80" rx="12" ry="12" fill="rgba(59,130,246,.25)" stroke="var(--border)"/>
          <text x="825" y="150" fill="currentColor" style="font-weight:700">Respuesta al usuario</text>

          <line x1="250" y1="160" x2="290" y2="160" stroke="currentColor" marker-end="url(#arrow)"/>
          <line x1="510" y1="160" x2="540" y2="120" stroke="currentColor" marker-end="url(#arrow)"/>
          <line x1="510" y1="160" x2="540" y2="230" stroke="currentColor" marker-end="url(#arrow)"/>
          <line x1="760" y1="160" x2="790" y2="160" stroke="currentColor" marker-end="url(#arrow)"/>
          <line x1="160" y1="210" x2="310" y2="210" stroke="currentColor" marker-end="url(#arrow)"/>
          <text x="120" y="205" fill="currentColor" style="font-size:13px">Petici√≥n</text>
          <text x="400" y="210" fill="currentColor" style="font-size:13px">Decisi√≥n & planificaci√≥n</text>
          <text x="650" y="170" fill="currentColor" style="font-size:13px">Ejecuci√≥n</text>
        </svg>
        <figcaption class="caption">El agente decide si invocar una funci√≥n (Python o API). La salida vuelve y se resume para el usuario.</figcaption>
      </figure>
    </section>

    <section id="ejemplos" class="card">
      <h2>3) Ejemplos de funciones</h2>
      <div class="grid-2">
        <div>
          <h3>Matem√°tica</h3>
          <pre class="code">def operar(a: float, b: float, op: str) -> float:
    if op == "sumar": return a + b
    if op == "restar": return a - b
    if op == "multiplicar": return a * b
    if op == "mod": return a % b
    raise ValueError("Operaci√≥n no soportada")</pre>
        </div>
        <div>
          <h3>HTTP (API)</h3>
          <pre class="code">import requests

def llamar_api(url: str, metodo: str = "GET", payload: dict | None = None):
    metodo = metodo.upper()
    if metodo == "GET":
        r = requests.get(url, timeout=15)
    elif metodo == "POST":
        r = requests.post(url, json=payload or {}, timeout=15)
    else:
        raise ValueError("M√©todo no soportado")
    r.raise_for_status()
    return r.json()</pre>
          <p class="small">‚ö†Ô∏è A√±ade autenticaci√≥n segura (tokens) y manejo de errores/reintentos.</p>
        </div>
      </div>
    </section>

    <section id="definicion" class="card">
      <h2>4) Definir funciones (esquema/metadata)</h2>
      <p>Adem√°s del c√≥digo, cada funci√≥n necesita una <em>descripci√≥n</em> y <em>par√°metros</em> para que el agente decida cu√°ndo usarla.</p>
      <table>
        <thead><tr><th>Campo</th><th>Ejemplo</th><th>Descripci√≥n</th></tr></thead>
        <tbody>
          <tr><td><code>name</code></td><td><code>operar</code></td><td>Identificador √∫nico de la funci√≥n</td></tr>
          <tr><td><code>description</code></td><td>‚ÄúRealiza operaciones aritm√©ticas b√°sicas‚Äù</td><td>Cu√°ndo/por qu√© usarla</td></tr>
          <tr><td><code>parameters (JSON Schema)</code></td><td><code>a,b,op</code></td><td>Tipos, requeridos, enum de valores</td></tr>
          <tr><td><code>returns</code></td><td><code>number</code></td><td>Tipo de la salida</td></tr>
        </tbody>
      </table>
      <details>
        <summary>Consejo</summary>
        Usa nombres y descripciones <strong>claras</strong>; limita rangos/enum para que el modelo elija correctamente.
      </details>
    </section>

    <section id="patron" class="card">
      <h2>5) Patr√≥n de implementaci√≥n (pseudoc√≥digo)</h2>
      <pre class="code"># 1) Definir funciones (c√≥digo real) y su metadata (name/description/parameters)
# 2) Crear el agente con modelo y herramientas registradas
# 3) Recibir prompt del usuario ‚Üí el agente decide si llamar a una funci√≥n
# 4) Ejecutar la funci√≥n seleccionada y capturar su salida
# 5) Devolver respuesta al usuario combinando salida + redacci√≥n del LLM

def dispatch(nombre_funcion, args):
    if nombre_funcion == "operar":
        return operar(**args)
    if nombre_funcion == "llamar_api":
        return llamar_api(**args)
    raise ValueError("Funci√≥n no registrada")</pre>
      <p class="small">Este patr√≥n se adapta igual cuando registras herramientas como Azure Functions, Logic Apps o OpenAPI.</p>
    </section>

    <section id="buenas" class="card">
      <h2>6) Buenas pr√°cticas</h2>
      <ul>
        <li><strong>Define esquemas estrictos</strong> (tipos, enum, rangos) para reducir ambig√ºedad.</li>
        <li><strong>Idempotencia</strong> en funciones que alteran estado; a√±ade <em>retries</em> con backoff.</li>
        <li><strong>Observabilidad</strong>: registra entradas/salidas y errores (sin filtrar secretos).</li>
        <li><strong>Seguridad</strong>: tokens en Key Vault/Entra, principio de m√≠nimo privilegio.</li>
        <li><strong>Time-outs</strong> razonables y manejo de excepciones.</li>
      </ul>
    </section>

    <section id="errores" class="card">
      <h2>7) Errores comunes</h2>
      <ul>
        <li>Descripciones vagas ‚Üí el agente elige funciones incorrectas.</li>
        <li>Falta de validaci√≥n de par√°metros ‚Üí excepciones en runtime.</li>
        <li>No contemplar <em>reentradas</em> o duplicados en operaciones con efectos.</li>
        <li>Bloquear el hilo con operaciones I/O pesadas sin asincron√≠a.</li>
      </ul>
    </section>

    <section id="check" class="card">
      <h2>8) Checklist</h2>
      <ul>
        <li>Funciones registradas con <code>name</code>, <code>description</code>, <code>parameters</code>, <code>returns</code>.</li>
        <li>Pruebas unitarias de cada funci√≥n (incluye errores).</li>
        <li>Logs/metrics; alertas de fallos.</li>
        <li>Gesti√≥n de secretos y permisos lista.</li>
      </ul>
    </section>

    <div class="footer">
      Hecho para estudio personal. Personal√≠zalo para tus cursos o documentaci√≥n.
    </div>
  </main>
</div>

<div class="btns">
  <button class="btn" onclick="document.body.dataset.theme = (document.body.dataset.theme === 'light' ? 'dark' : 'light')">üåó Modo</button>
  <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
  <button class="btn" onclick="window.scrollTo({top:0, behavior:'smooth'})">‚¨ÜÔ∏è Arriba</button>
</div>
</body>
</html>
